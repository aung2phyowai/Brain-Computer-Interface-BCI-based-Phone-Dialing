<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" >
<head>
<title>Contributions:BCI2000Command - BCI2000 Help</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Contributions:BCI2000Command,Contributions:Applications,Contributions:BCI2000Automation,Contributions:BCI2000PresentationLink,Contributions:BCI2000PythonBindings,Programming Reference:BCI2000Remote Class,User Reference:BCI2000Shell,User Reference:Operator Module Scripting" />
<link rel="shortcut icon" href="../../favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../skins/common/wikiprintable.css' />
<link rel="stylesheet" href="../skins/common/wikistandard.css@1" type="text/css" />
<link rel="stylesheet" href="../skins/common/common.css" type="text/css" />
<link rel="stylesheet" href="../skins/common/htmlhelp.css" type="text/css" />

<style type='text/css'>
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px;  }
#article { margin-left: 152px; margin-right: 4px; }
</style>
</head>

<body bgcolor='#FFFFFF'>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
</tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">BCI2000Command</h1><p class="subtitle">Contributions</p><hr class="sep" /><table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class='toclevel-1'><a href="Contributions%253ABCI2000Command.html#Synopsis"><span class="tocnumber">1</span> <span class="toctext">Synopsis</span></a></li>
<li class='toclevel-1'><a href="Contributions%253ABCI2000Command.html#Location"><span class="tocnumber">2</span> <span class="toctext">Location</span></a></li>
<li class='toclevel-1'><a href="Contributions%253ABCI2000Command.html#Versioning"><span class="tocnumber">3</span> <span class="toctext">Versioning</span></a>
<ul>
<li class='toclevel-2'><a href="Contributions%253ABCI2000Command.html#Author"><span class="tocnumber">3.1</span> <span class="toctext">Author</span></a></li>
<li class='toclevel-2'><a href="Contributions%253ABCI2000Command.html#Source_Code_Revisions"><span class="tocnumber">3.2</span> <span class="toctext">Source Code Revisions</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="Contributions%253ABCI2000Command.html#Functional_Description"><span class="tocnumber">4</span> <span class="toctext">Functional Description</span></a></li>
<li class='toclevel-1'><a href="Contributions%253ABCI2000Command.html#BCI2000Command_vs._BCI2000Shell"><span class="tocnumber">5</span> <span class="toctext">BCI2000Command vs. BCI2000Shell</span></a></li>
<li class='toclevel-1'><a href="Contributions%253ABCI2000Command.html#Reference"><span class="tocnumber">6</span> <span class="toctext">Reference</span></a>
<ul>
<li class='toclevel-2'><a href="Contributions%253ABCI2000Command.html#Properties"><span class="tocnumber">6.1</span> <span class="toctext">Properties</span></a></li>
<li class='toclevel-2'><a href="Contributions%253ABCI2000Command.html#Commands"><span class="tocnumber">6.2</span> <span class="toctext">Commands</span></a>
<ul>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#Run_.5B.3Cscript_file_1.3E_.3Cscript_file_2.3E_....5D"><span class="tocnumber">6.2.1</span> <span class="toctext">Run [&lt;script file 1&gt; &lt;script file 2&gt; ...]</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#Quit"><span class="tocnumber">6.2.2</span> <span class="toctext">Quit</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#StartupModules_.3Cmodule1.3E_.3Cmodule2.3E_..."><span class="tocnumber">6.2.3</span> <span class="toctext">StartupModules &lt;module1&gt; &lt;module2&gt; ...</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#SetConfig"><span class="tocnumber">6.2.4</span> <span class="toctext">SetConfig</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#Start"><span class="tocnumber">6.2.5</span> <span class="toctext">Start</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#Stop"><span class="tocnumber">6.2.6</span> <span class="toctext">Stop</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#GetParameter_.3Cname.3E"><span class="tocnumber">6.2.7</span> <span class="toctext">GetParameter &lt;name&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#SetParameter_.3Cname.3E_.3Cvalue.3E"><span class="tocnumber">6.2.8</span> <span class="toctext">SetParameter &lt;name&gt; &lt;value&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#LoadParametersLocal_.3Cparameter_file.3E"><span class="tocnumber">6.2.9</span> <span class="toctext">LoadParametersLocal &lt;parameter file&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#LoadParametersRemote_.3Cparameter_file.3E"><span class="tocnumber">6.2.10</span> <span class="toctext">LoadParametersRemote &lt;parameter file&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#AddStateVariable_.3Cvariable_name.3E_.3Cbit_width.3E_.3Cinitial_value.3E"><span class="tocnumber">6.2.11</span> <span class="toctext">AddStateVariable &lt;variable name&gt; &lt;bit width&gt; &lt;initial value&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#GetStateVariable_.3Cvariable_name.3E"><span class="tocnumber">6.2.12</span> <span class="toctext">GetStateVariable &lt;variable name&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#SetStateVariable_.3Cvariable_name.3E_.3Cvariable_value.3E"><span class="tocnumber">6.2.13</span> <span class="toctext">SetStateVariable &lt;variable name&gt; &lt;variable value&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#GetSystemState"><span class="tocnumber">6.2.14</span> <span class="toctext">GetSystemState</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#GetControlSignal_.3Cchannel_index.3E_.3Celement_index.3E"><span class="tocnumber">6.2.15</span> <span class="toctext">GetControlSignal &lt;channel index&gt; &lt;element index&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#Execute_.3Cscripting_command.3E"><span class="tocnumber">6.2.16</span> <span class="toctext">Execute &lt;scripting command&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#SetScript_.3Cevent.3E_.3Cscripting_commands.3E"><span class="tocnumber">6.2.17</span> <span class="toctext">SetScript &lt;event&gt; &lt;scripting commands&gt;</span></a></li>
<li class='toclevel-3'><a href="Contributions%253ABCI2000Command.html#GetScript_.3Cevent.3E"><span class="tocnumber">6.2.18</span> <span class="toctext">GetScript &lt;event&gt;</span></a></li>
</ul>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="Contributions%253ABCI2000Command.html#Examples"><span class="tocnumber">7</span> <span class="toctext">Examples</span></a>
<ul>
<li class='toclevel-2'><a href="Contributions%253ABCI2000Command.html#Windows_cmd_interpreter"><span class="tocnumber">7.1</span> <span class="toctext">Windows cmd interpreter</span></a></li>
<li class='toclevel-2'><a href="Contributions%253ABCI2000Command.html#Linux.2FUnix_bash_shell"><span class="tocnumber">7.2</span> <span class="toctext">Linux/Unix bash shell</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="Contributions%253ABCI2000Command.html#See_also"><span class="tocnumber">8</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></table>
<a name="Synopsis"></a><h2>Synopsis</h2>
<p>BCI2000Command is a command line program that controls the BCI2000 Operator. It allows remote control of BCI2000 from command interpreters (shells), such as the WIndows CMD interpreter, or the bash or tcsh shells on Unix systems., or  any environment that provides access to Windows automation components. It wraps up the functionality of the <a href="Programming_Reference%253ABCI2000Remote_Class.html" title="Programming Reference:BCI2000Remote Class">BCI2000Remote</a> C++ class. When writing C++ code, you should consider using that class directly rather than BCI2000Command.
</p><p>Before you can use it, BCI2000Command must be in your operating system's path variable. Typically, you will keep BCI2000Command inside the BCI2000/prog directory, and add that directory to the path variable.
</p>
<a name="Location"></a><h2>Location</h2>
<p><a href="http://www.bci2000.org/svn/trunk/src/contrib/ExternalLinks/BCI2000Command" class='external free' title="http://www.bci2000.org/svn/trunk/src/contrib/ExternalLinks/BCI2000Command" rel="nofollow">http://www.bci2000.org/svn/trunk/src/contrib/ExternalLinks/BCI2000Command</a>
</p>
<a name="Versioning"></a><h2>Versioning</h2>
<a name="Author"></a><h3>Author</h3>
<p>juergen.mellinger@uni-tuebingen.de
</p>
<a name="Source_Code_Revisions"></a><h3>Source Code Revisions</h3>
<ul><li>Initial development: 3946
</li><li>Tested under: 3953
</li></ul>
<a name="Functional_Description"></a><h2>Functional Description</h2>
<p>BCI2000Command is a command line interface to the BCI2000 Operator module, and allows to start up, configure, and run BCI2000 from the command line, or from command line scripts (batch files).
</p><p>Calling "BCI2000Command Run" will start up the Operator module residing in the same directory as BCI2000Automation. You may then use "BCI2000 Command StartupModules" in order to start up BCI2000 core modules.
</p><p>Alternatively, you may specify the path to a BCI2000 batch file in the BCI2000/batch directory in the <i>BCI2000OperatorPath</i> environment variable. An appropriate batch file should start up Operator and core modules, and needs to forward its command line arguments to the Operator module. All batch files coming with BCI2000 fulfil this condition. When a batch file is specified, there is no need to call the StartupModules command.
</p><p>As yet another option, you may connect to an Operator module that is already running, e.g., on a remote machine on the network. In this case, set the BCI2000OperatorPath environment variable to an empty string, and the BCI2000TelnetAddress environment variable to the address that the remote Operator module is listening on, i.e. the remote machine's IP address, followed with a colon, and the port specified when starting up the remote Operator module. The remote Operator module must have been started with the --Telnet command line option, followed with the address to listen on. On the remote machine, this would typically be "localhost:3999". Don't use any of the ports between 4000 and 4002, as this will interfere with the communication between the Operator module, and BCI2000 core modules. Depending on whether the remote Operator module has been started up together with its core modules, or not, you may then call "BCI2000Command StartupModules" in order to start up BCI2000 core modules on the remote machine.
</p><p>Once all BCI2000 modules are running, you may load parameter files locally or remotely using the LoadParametersLocal and LoadParametersRemote commands. Subject ID, Session ID, and data directory are set using the BCI2000SubjectID, BCI2000SessionID, and BCI2000DataDirectory environment variables.
</p><p>A recording may then be started by calling the Start command. Depending on configuration, the recording will terminate automatically, or needs to be terminated by calling the Stop command.
</p><p>To run BCI2000 in a different configuration (i.e., with different core modules), it is not necessary to terminate the Operator module. Rather, you may execute StartupModules multiple times in order to terminate currently running core modules, and start different ones.
</p><p>Once you are done using BCI2000, you may quit the Operator module using "BCI2000Command Quit".
</p>
<a name="BCI2000Command_vs._BCI2000Shell"></a><h2>BCI2000Command vs. BCI2000Shell</h2>
<p>BCI2000Command provides functionality similar to BCI2000Shell, which is a shell that executes <a href="User_Reference%253AOperator_Module_Scripting.html" title="User Reference:Operator Module Scripting">Operator scripting commands</a>. The choice between the two is mainly a choice between writing a shell script vs. writing a BCI2000 Operator script. One would choose BCI2000Command to integrate BCI2000 remote control into an existing system of shell scripts, whereas one would choose BCI2000Shell to use Operator scripting as the main language. However, some amount of overlap exists: BCI2000Command is able to execute arbitrary Operator scripting commands, and BCI2000Shell's <i>-c</i> option allows it to be run within shell scripts in a way similar to BCI2000Command. Still, BCI2000Command provides a higher-level interface than BCI2000Shell does.
</p>
<a name="Reference"></a><h2>Reference</h2>
<p>BCI2000Command calling syntax is
</p>
<pre>BCI2000Command [--property1=value1 --property2=value2 ...] command [argument1 argument2 ...]
</pre>
<a name="Properties"></a><h3>Properties</h3>
<p>Properties correspond to the properties of the BCI2000Remote class, and may be given on the command line, or as environment variables named "BCI2000property". Existing properties are:
</p>
<pre>Timeout
TelnetAddress
OperatorPath
WindowVisible
WindowTitle
SubjectID
SessionID
DataDirectory
</pre>
<a name="Commands"></a><h3>Commands</h3>
<p>Commands are applied to the BCI2000 operator module listening at the address given by the TelnetAddress property (defaults to localhost:3999).
You may use the "Run" command to start up BCI2000 locally with appropriate parameters.
Available commands are:
</p>
<a name="Run_.5B.3Cscript_file_1.3E_.3Cscript_file_2.3E_....5D"></a><h4>Run [&lt;script file 1&gt; &lt;script file 2&gt; ...]</h4>
<p>Makes sure BCI2000 is started up, and optionally executes BCI2000 script files. Script files are local to the system that runs BCI2000Command, and are specified relative to the current directory of the calling script or shell.
</p>
<a name="Quit"></a><h4>Quit</h4>
<p>Terminates BCI2000.
</p>
<a name="StartupModules_.3Cmodule1.3E_.3Cmodule2.3E_..."></a><h4>StartupModules &lt;module1&gt; &lt;module2&gt; ...</h4>
<p>Starts up BCI2000 modules.
</p>
<a name="SetConfig"></a><h4>SetConfig</h4>
<p>Applies the current set of parameters.
</p>
<a name="Start"></a><h4>Start</h4>
<p>Starts a new run (recording).
</p>
<a name="Stop"></a><h4>Stop</h4>
<p>Stops the current run (recording).
</p>
<a name="GetParameter_.3Cname.3E"></a><h4>GetParameter &lt;name&gt;</h4>
<p>Returns the value of the specified parameter.
</p>
<a name="SetParameter_.3Cname.3E_.3Cvalue.3E"></a><h4>SetParameter &lt;name&gt; &lt;value&gt;</h4>
<p>Sets the value of the specified parameter. This command fails when the parameter does not exist. Use the <i>Execute</i> command in conjunction with the INSERT PARAMETER scripting command to add a parameter to the system.
</p>
<a name="LoadParametersLocal_.3Cparameter_file.3E"></a><h4>LoadParametersLocal &lt;parameter file&gt;</h4>
<p>Loads a parameter file relative to the current working directory.
</p>
<a name="LoadParametersRemote_.3Cparameter_file.3E"></a><h4>LoadParametersRemote &lt;parameter file&gt;</h4>
<p>Loads a parameter file relative to BCI2000's working directory.
</p>
<a name="AddStateVariable_.3Cvariable_name.3E_.3Cbit_width.3E_.3Cinitial_value.3E"></a><h4>AddStateVariable &lt;variable name&gt; &lt;bit width&gt; &lt;initial value&gt;</h4>
<p>Adds a state variable to the system. This is only possible before core modules are connected to the Operator module.
</p>
<a name="GetStateVariable_.3Cvariable_name.3E"></a><h4>GetStateVariable &lt;variable name&gt;</h4>
<p>Returns the value of the named BCI2000 state variable.
</p>
<a name="SetStateVariable_.3Cvariable_name.3E_.3Cvariable_value.3E"></a><h4>SetStateVariable &lt;variable name&gt; &lt;variable value&gt;</h4>
<p>Sets the value of the named BCI2000 state variable.
</p>
<a name="GetSystemState"></a><h4>GetSystemState</h4>
<p>Returns the current system state (i.e., state of operation). This will be one of Unavailable, Idle, Startup, Initialization, Resting, Suspended, ParamsModified, Running, Termination, Busy.
</p>
<a name="GetControlSignal_.3Cchannel_index.3E_.3Celement_index.3E"></a><h4>GetControlSignal &lt;channel index&gt; &lt;element index&gt;</h4>
<p>Gets the value of the BCI2000 control signal. Indices are 1-based.
</p>
<a name="Execute_.3Cscripting_command.3E"></a><h4>Execute &lt;scripting command&gt;</h4>
<p>Executes a scripting command. Scripting commands with arguments must enclosed in quotes to be seen as a single argument.
</p>
<a name="SetScript_.3Cevent.3E_.3Cscripting_commands.3E"></a><h4>SetScript &lt;event&gt; &lt;scripting commands&gt;</h4>
<p>Associates <a href="User_Reference%253AOperator_Module_Scripting.html" title="User Reference:Operator Module Scripting">Operator scripting commands</a> with event, which is one of OnConnect, OnSetConfig, OnStart, OnResume, OnStop, OnShutdown.
</p>
<a name="GetScript_.3Cevent.3E"></a><h4>GetScript &lt;event&gt;</h4>
<p>Returns <a href="User_Reference%253AOperator_Module_Scripting.html" title="User Reference:Operator Module Scripting">Operator scripting commands</a> associated with event, which is one of OnConnect, OnSetConfig, OnStart, OnResume, OnStop, OnShutdown.
</p>
<a name="Examples"></a><h2>Examples</h2>
<a name="Windows_cmd_interpreter"></a><h3>Windows cmd interpreter</h3>
<p>It is assumed that the BCI2000/prog directory is the current directory, or in the path.
</p>
<pre>
@echo off
setlocal
BCI2000Command Run
BCI2000Command StartupModules &quot;SignalGenerator --LogMouse=1&quot; ARSignalProcessing CursorTask || BCI2000Command Quit &amp;&amp; exit /b 1
BCI2000Command LoadParametersLocal &quot;path to myfile.prm&quot;
BCI2000Command Start
:loop
BCI2000Command GetControlSignal 1 1
for /f &quot;tokens=*&quot; %%i in ('BCI2000Command GetSystemState') do set state=%%i
if %state%==Running goto loop
BCI2000Command Quit
</pre>
<a name="Linux.2FUnix_bash_shell"></a><h3>Linux/Unix bash shell</h3>
<p>It is assumed that the BCI2000/prog directory is in the path.
</p>
<pre>#!/bin/sh
BCI2000Command Run || exit
BCI2000Command StartupModules &quot;SignalGenerator --LogMouse=1&quot; ARSignalProcessing CursorTask || ( BCI2000Command Quit &amp;&amp; exit )
BCI2000Command LoadParametersLocal &quot;path to myfile.prm&quot;
if BCI2000Command Start; then
  while [ `BCI2000Command GetSystemState` = Running ]; do
    BCI2000Command GetControlSignal 1 1;
  done
fi
BCI2000Command Quit
</pre>
<a name="See_also"></a><h2>See also</h2>
<p><a href="Programming_Reference%253ABCI2000Remote_Class.html" title="Programming Reference:BCI2000Remote Class">Programming Reference:BCI2000Remote Class</a>, <a href="Contributions%253ABCI2000PresentationLink.html" title="Contributions:BCI2000PresentationLink">Contributions:BCI2000PresentationLink</a>, <a href="Contributions%253ABCI2000Automation.html" title="Contributions:BCI2000Automation">Contributions:BCI2000Automation</a>, <a href="Contributions%253ABCI2000PythonBindings.html" title="Contributions:BCI2000PythonBindings">Contributions:BCI2000PythonBindings</a>, <a href="User_Reference%253ABCI2000Shell.html" title="User Reference:BCI2000Shell">User Reference:BCI2000Shell</a>, <a href="Contributions%253AApplications.html" title="Contributions:Applications">Contributions:Applications</a>
</p>
<div class="printfooter">
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'></td></tr></table>
</div>
</div>

<div id='quickbar'>
<table class="image"><caption align="bottom"><h2>BCI2000 Help</h2></caption><tr><td><a href="BCI2000_Help.html"><img src='../../images/bci2000logo_small.png' height=100 width=100 alt='[BCI2000 Help]' /></a></td></tr></table>
<hr class='sep' /><a href="User_Tutorial%253ABCI2000_Tour.html">Getting Started</a><br />
<a href="User_Reference%253AContents.html">User Manual</a><br />
<a href="Technical_Reference%253AContents.html">Technical Reference</a><br />
<a href="Programming_Reference%253AContents.html">Programming Manual</a><br />
<a href="Contributions%253AContents.html">Contributions</a><br />
<ul><li><a href="Contributions%253AADCs.html">Data Acquisition</a></li>
<li><a href="Contributions%253AFileWriters.html">File Formats</a></li>
<li><a href="Contributions%253ASignalProcessing.html">Signal Processing</a></li>
<li><a href="Contributions%253AApplications.html">Applications</a></li>
<li><a href="Contributions%253ATools.html">Tools</a></li>
</ul><hr class='sep' />
<a href="BCI2000_Glossary.html">BCI2000 Glossary</a><br />
</div>

</body></html>