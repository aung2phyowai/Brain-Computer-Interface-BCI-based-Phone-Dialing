<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" >
<head>
<title>Programming Reference:BCI2000FileReader Class - BCI2000 Help</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Programming Reference:BCI2000FileReader Class,Programming Reference:Environment Class,Programming Reference:Parameters,Programming Reference:Signals,Programming Reference:States,Technical Reference:BCI2000 File Format,User Reference:BCI2000FileWriter" />
<link rel="shortcut icon" href="../../favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../skins/common/wikiprintable.css' />
<link rel="stylesheet" href="../skins/common/wikistandard.css@1" type="text/css" />
<link rel="stylesheet" href="../skins/common/common.css" type="text/css" />
<link rel="stylesheet" href="../skins/common/htmlhelp.css" type="text/css" />

<style type='text/css'>
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px;  }
#article { margin-left: 152px; margin-right: 4px; }
</style>
</head>

<body bgcolor='#FFFFFF'>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
</tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">BCI2000FileReader Class</h1><p class="subtitle">Programming Reference</p><hr class="sep" /><p>The <tt>BCI2000FileReader</tt> class provides an interface to data stored in a single BCI2000 data file.
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class='toclevel-1'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#Methods"><span class="tocnumber">1</span> <span class="toctext">Methods</span></a>
<ul>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#BCI2000FileReader.28.5Bfile_name.5D.29"><span class="tocnumber">1.1</span> <span class="toctext">BCI2000FileReader([file name])</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#Open.28file_name.2C_.5Bbuffer_size.3D50kB.5D.29"><span class="tocnumber">1.2</span> <span class="toctext">Open(file name, [buffer size=50kB])</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#RawValue.28channel.2C_sample.29"><span class="tocnumber">1.3</span> <span class="toctext">RawValue(channel, sample)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#CalibratedValue.28channel.2C_sample.29"><span class="tocnumber">1.4</span> <span class="toctext">CalibratedValue(channel, sample)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#ReadStateVector.28sample.29"><span class="tocnumber">1.5</span> <span class="toctext">ReadStateVector(sample)</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#Properties"><span class="tocnumber">2</span> <span class="toctext">Properties</span></a>
<ul>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#IsOpen_.28r.29"><span class="tocnumber">2.1</span> <span class="toctext">IsOpen (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#ErrorState_.28r.29"><span class="tocnumber">2.2</span> <span class="toctext">ErrorState (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#NumSamples_.28r.29"><span class="tocnumber">2.3</span> <span class="toctext">NumSamples (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#SamplingRate_.28r.29"><span class="tocnumber">2.4</span> <span class="toctext">SamplingRate (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#SignalProperties_.28r.29"><span class="tocnumber">2.5</span> <span class="toctext">SignalProperties (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#FileFormatVersion_.28r.29"><span class="tocnumber">2.6</span> <span class="toctext">FileFormatVersion (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#HeaderLength_.28r.29"><span class="tocnumber">2.7</span> <span class="toctext">HeaderLength (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#StateVectorLength_.28r.29"><span class="tocnumber">2.8</span> <span class="toctext">StateVectorLength (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#Parameters_.28r.29"><span class="tocnumber">2.9</span> <span class="toctext">Parameters (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#Parameter_.28r.29"><span class="tocnumber">2.10</span> <span class="toctext">Parameter (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#States_.28r.29"><span class="tocnumber">2.11</span> <span class="toctext">States (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#State_.28r.29"><span class="tocnumber">2.12</span> <span class="toctext">State (r)</span></a></li>
<li class='toclevel-2'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#StateVector_.28r.29"><span class="tocnumber">2.13</span> <span class="toctext">StateVector (r)</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#Performance_Considerations"><span class="tocnumber">3</span> <span class="toctext">Performance Considerations</span></a></li>
<li class='toclevel-1'><a href="Programming_Reference%253ABCI2000FileReader_Class.html#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></table>
<a name="Methods"></a><h2>Methods</h2>
<a name="BCI2000FileReader.28.5Bfile_name.5D.29"></a><h3>BCI2000FileReader([file name])</h3>
<p>With a file name given as an argument, the constructor will try to open the specified file.
</p>
<a name="Open.28file_name.2C_.5Bbuffer_size.3D50kB.5D.29"></a><h3>Open(file name, [buffer size=50kB])</h3>
<p>Will open the specified data file. Use the <tt>IsOpen</tt> and <tt>ErrorState</tt> properties to check whether a file is actually open.
In a second argument, the size of <tt>BCI2000FileReader</tt>'s internal data buffer may be specified in bytes; when no buffer size argument is given, a default size of 50kB is used.
</p>
<a name="RawValue.28channel.2C_sample.29"></a><h3>RawValue(channel, sample)</h3>
<p>Sets the current sample position to the value specified in the second argument, and returns the raw sample value for the channel specified in the first argument.
</p>
<a name="CalibratedValue.28channel.2C_sample.29"></a><h3>CalibratedValue(channel, sample)</h3>
<p>Sets the current sample position to the value specified in the second argument, and returns the calibrated sample value for the channel specified in the first argument.
The calibrated sample value is obtained by applying channel-specific sample offsets and gains as present in the file's <i>SourceChOffset</i> and <i>SourceChGain</i> parameters.
</p>
<a name="ReadStateVector.28sample.29"></a><h3>ReadStateVector(sample)</h3>
<p>Sets the current sample position to the specified value, and reads state vector data.
</p>
<a name="Properties"></a><h2>Properties</h2>
<a name="IsOpen_.28r.29"></a><h3>IsOpen (r)</h3>
<p><i>true</i> when a file has been opened successfully, <i>false</i> otherwise.
</p>
<a name="ErrorState_.28r.29"></a><h3>ErrorState (r)</h3>
<p>One of
</p>
<ul><li>NoError,
</li><li>FileOpenError,
</li><li>MalformedHeader.
</li></ul>
<a name="NumSamples_.28r.29"></a><h3>NumSamples (r)</h3>
<p>The number of samples in the currently opened data file.
</p>
<a name="SamplingRate_.28r.29"></a><h3>SamplingRate (r)</h3>
<p>The currently opened data file's sampling rate.
</p>
<a name="SignalProperties_.28r.29"></a><h3>SignalProperties (r)</h3>
<p>A <a href="Programming_Reference%253ASignals.html#SignalProperties_Class" title="Programming Reference:Signals"><tt>SignalProperties</tt></a> object describing the current file's data format, number of channels, sample block size (in its Elements property), and physical units.
</p>
<a name="FileFormatVersion_.28r.29"></a><h3>FileFormatVersion (r)</h3>
<p>A string describing the file's format as specified by the file header. Currently, this is "1.0" or "1.1".
</p>
<a name="HeaderLength_.28r.29"></a><h3>HeaderLength (r)</h3>
<p>The data file's header length in bytes.
</p>
<a name="StateVectorLength_.28r.29"></a><h3>StateVectorLength (r)</h3>
<p>The state vector's length in bytes.
</p>
<a name="Parameters_.28r.29"></a><h3>Parameters (r)</h3>
<p>A <a href="Programming_Reference%253AParameters.html#ParamList_Class" title="Programming Reference:Parameters"><tt>ParamList</tt></a> object that contains all parameters present in the file.
</p>
<a name="Parameter_.28r.29"></a><h3>Parameter (r)</h3>
<p>Access to an individual parameter, following the <a href="Programming_Reference%253AEnvironment_Class.html#Access_to_Parameters_and_States" title="Programming Reference:Environment Class">syntax provided by the <tt>Environment</tt> class</a>.
</p>
<a name="States_.28r.29"></a><h3>States (r)</h3>
<p>A <a href="Programming_Reference%253AStates.html#StateList_Class" title="Programming Reference:States"><tt>StateList</tt></a> object containing all state variables present in the file.
</p>
<a name="State_.28r.29"></a><h3>State (r)</h3>
<p>Access to an individual state variable, following the <a href="Programming_Reference%253AEnvironment_Class.html#Access_to_Parameters_and_States" title="Programming Reference:Environment Class">syntax provided by the <tt>Environment</tt> class</a>. The returned value will match the state variable's value at the current sample position, as specified to a previous call to one of the <tt>RawValue</tt>, <tt>CalibratedValue</tt>, or <tt>ReadStateVector</tt> methods.
</p>
<a name="StateVector_.28r.29"></a><h3>StateVector (r)</h3>
<p>Access to the full state vector, with state values matching those at the current sample position.
</p>
<a name="Performance_Considerations"></a><h2>Performance Considerations</h2>
<p>To improve performance when reading data, <tt>BCI2000FileReader</tt> uses an internal buffer which is 50kB in size by default but may be set to a different value using an optional second argument to <tt>BCI2000FileReader::Open()</tt>.
</p><p>Buffering strategy is optimized for <i>sequential forward access</i>, which is supposed to be the most relevant use case. Buffering is non-overlapping, with the requested sample always the first one in the buffer in case the buffer needs updating. In case of sequential access in <i>reverse</i> direction, this buffering scheme breaks down and becomes maximally inefficient because the entire buffer is updated on each access.
</p><p>In a BCI2000 data file, data is organized such that, for each sample, values from all channels and states are stored, followed with all values from the next sample point, etc. When reading data from multiple channels, this implies that it is favorable to iterate over <i>channels</i> in an <i>inner</i> loop, and over <i>samples</i> in an <i>outer</i> loop; otherwise, buffering will become less efficient by a factor identical to the number of channels read.
</p>
<a name="See_also"></a><h2>See also</h2>
<p><a href="Technical_Reference%253ABCI2000_File_Format.html" title="Technical Reference:BCI2000 File Format">Technical Reference:BCI2000 File Format</a>, <a href="User_Reference%253ABCI2000FileWriter.html" title="User Reference:BCI2000FileWriter">User Reference:BCI2000FileWriter</a>
</p>
<div class="printfooter">
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'></td></tr></table>
</div>
</div>

<div id='quickbar'>
<table class="image"><caption align="bottom"><h2>BCI2000 Help</h2></caption><tr><td><a href="BCI2000_Help.html"><img src='../../images/bci2000logo_small.png' height=100 width=100 alt='[BCI2000 Help]' /></a></td></tr></table>
<hr class='sep' /><a href="User_Tutorial%253ABCI2000_Tour.html">Getting Started</a><br />
<a href="User_Reference%253AContents.html">User Manual</a><br />
<a href="Technical_Reference%253AContents.html">Technical Reference</a><br />
<a href="Programming_Reference%253AContents.html">Programming Manual</a><br />
<ul><li>Concepts</li>
<ul><li><a href="Programming_Reference%253AFilter_Chain.html">Filter Chain</a></li>
<li><a href="Programming_Reference%253ASignals.html">Signals</a></li>
<li><a href="Programming_Reference%253AError_Handling.html">Error Handling</a></li>
<li><a href="Programming_Reference%253ALocalization.html">Localization</a></li>
<li><a href="Programming_Reference%253ARapid_Development.html">Rapid Development</a></li>
</ul><li>Reference</li>
<ul><li><a href="Programming_Reference%253AGenericFilter_Class.html">GenericFilter</a></li>
<li><a href="Programming_Reference%253AEnvironment_Class.html">Environment</a></li>
<li><a href="Programming_Reference%253AGenericVisualization_Class.html">GenericVisuali-zation</a></li>
<li><a href="Programming_Reference%253AErrors_and_Warnings.html">Errors and Warnings</a></li>
<li><a href="Programming_Reference%253ADebug_Output.html">Debug Output</a></li>
</ul><li>Data Acquisition</li>
<ul><li><a href="Programming_Reference%253AGenericADC_Class.html">GenericADC</a></li>
</ul><li>Data Storage</li>
<ul><li><a href="Programming_Reference%253AGenericFileWriter_Class.html">GenericFileWriter</a></li>
<li>BCI2000FileReader</li>
</ul><li>Signal Processing</li>
<ul><li><a href="Programming_Reference%253AIIRFilter_Class.html">IIR Filters</a></li>
</ul><li>Application Modules</li>
<ul><li><a href="Programming_Reference%253AApplicationBase_Class.html">ApplicationBase</a></li>
<li><a href="Programming_Reference%253AFeedbackTask_Class.html">FeedbackTask</a></li>
<li><a href="Programming_Reference%253AStimulusTask_Class.html">StimulusTask</a></li>
<li><a href="Programming_Reference%253A3D_API.html">3D API</a></li>
</ul><li>Howtos</li>
<li><a href="Programming_FAQ.html">FAQ</a></li>
<li>Tutorials</li>
</ul><a href="Contributions%253AContents.html">Contributions</a><br />
<hr class='sep' />
<a href="BCI2000_Glossary.html">BCI2000 Glossary</a><br />
</div>

</body></html>